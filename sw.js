var l="v1",u=`pages_${l}`,h=`assets_${l}`,m=new Set([u,h]),i="sw-cache-expires",C=0,d=31557600;self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(t=>{let c=t.filter(s=>!m.has(s)).map(s=>caches.delete(s));return Promise.all(c)}).then(()=>self.clients.claim()))});self.addEventListener("fetch",e=>{e.respondWith(caches.match(e.request.url).then(t=>{let c=Number(t?.headers.get(i));if(t&&new Date().getTime()/1e3<c)return t;let r=new URL(e.request.url).pathname.startsWith("/public");return fetch(e.request).then(n=>{if(!n||n.status!==200||n.type!=="basic")return n;let o=g(n.headers.get("cache-control")||"");if(o["no-store"])return n;let f=r?d:C,p=o["max-age"]??f,A=Math.trunc(new Date().getTime()/1e3)+p,a=n.clone(),E=[...a.headers,[i,""+A]];return caches.open(r?h:u).then(_=>{_.put(e.request.url,new Response(a.body,{headers:E}))}),n}).catch(()=>t||new Response("Page not available."))}))});function g(e){let t={};if(!e)return{};let c=e.split(/, ?/).map(s=>s.split("="));for(let[s,r]of c)!s||(t[s]=r?Number(r):1);return t}
